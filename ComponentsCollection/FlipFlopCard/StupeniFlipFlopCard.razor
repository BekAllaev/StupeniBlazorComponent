@using ComponentsCollection.Card;
@implements IStupeniFlipFlopCard

<StupeniCard Title="@Title" ButtonText="@currentButtonText" OnClickCallBack="ChangeCard">
    @if (showMainChildContent)
    {
        @MainChildContent
    }
    else
    {
        @AlternativeChildContent
    }
</StupeniCard>

@code {
    [Parameter]
    public string? Icon { get; set; }

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public Color ButtonColor { get; set; }

    [Parameter]
    public string MainContentButtonText { get; set; }

    [Parameter]
    public string AlternativeContentButtonText { get; set; }

    [Parameter]
    public RenderFragment MainChildContent { get; set; }

    [Parameter]
    public RenderFragment AlternativeChildContent { get; set; }

    [Parameter]
    public bool IsButtonDisabled { get; set; } = false;

    private bool showMainChildContent { get; set; } = true;

    private string currentButtonText { get; set; }

    protected override void OnParametersSet()
    {
        currentButtonText = MainContentButtonText;
    }

    private void ChangeCard()
    {
        if (showMainChildContent)
        {
            showMainChildContent = false;
            currentButtonText = AlternativeContentButtonText;
        }
        else
        {
            showMainChildContent = true;
            currentButtonText = MainContentButtonText;
        }

        StateHasChanged();
    }
}